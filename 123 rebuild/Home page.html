<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    .carousel .carousel-item img {
        max-height: 800px;
        width: 400px;
    }
  </style>

  <title>Home</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="Home page.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse ml-2" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="Cart.html"><span id="cart-icon">üõí</span><span id="cart-badge" class="badge">0</span>–ö–æ—Ä–∑–∏–Ω–∞</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Products.html">–ü—Ä–æ–¥—É–∫—Ç—ã</a>
        </li>
        <li class="nav-item">
          <a id="admin" class="nav-link" href="Administrative.html">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a>
        </li>
      </ul>
    </div>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ol class="navbar-nav">
        <li class="nav-item">
          <button id="loginBtn" type="button" class="btn" data-toggle="modal" data-target="#loginModal">
            –í–æ–π—Ç–∏
          </button>
          <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="loginModalLabel">–í–æ–π—Ç–∏</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="loginForm">
                    <div class="form-group">
                      <label for="login-email">Email:</label>
                      <input type="email" class="form-control" id="login-email" name="email" required>
                    </div>
                    <div class="form-group">
                      <label for="login-password">–ü–∞—Ä–æ–ª—å:</label>
                      <input type="password" class="form-control" id="login-password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-info">–í–æ–π—Ç–∏</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item">
          <button id="registerBtn" type="button" class="btn" data-toggle="modal" data-target="#registerModal">
            –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
          </button>
          <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="registerModalLabel">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <h2 class="text-center mb-4 text-dark">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
                  <form id='registrationForm'>
                    <div class="form-group text-dark">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                        <div id="emailFeedback" class="invalid-feedback"></div>
                    </div>
                    <div class="form-group text-dark">
                        <label for="username">–ò–º—è:</label>
                        <input type="text" class="form-control" id="username" name="username" required>
                        <div id="usernameFeedback" class="invalid-feedback"></div>
                    </div>
                    <div class="form-group text-dark">
                        <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                        <input type="password" class="form-control" id="password" name="password" required>
                        <div id="passwordFeedback" class="invalid-feedback"></div>
                    </div>
                    <button type="submit" class="btn btn-info">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </form>
                </div>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item" id="usernameDisplay" style="display: none;">
          <span class="nav-link">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="loggedInUsername"></span>!</span>
        </li>
        <li>
          <button id="logoutBtn" class="btn btn-danger" style="display: none;">Logout</button>
        </li>
      </ol>
    </div>
  </nav>  
  <script>
    if(localStorage.getItem('login-email')!=='admin@mail.ru'){
      document.getElementById('admin').style.display = 'none';
    }
  </script>
  <div class="container-fluid mt-4">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –º–∞–≥–∞–∑–∏–Ω –∏–≥—Ä—É—à–µ–∫!</h1>
    <p>–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∏–≥—Ä—É—à–µ–∫ –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞!</p>
    <button class="btn btn-primary">–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ</button>
  </div>
    <div id="imageCarousel" class="carousel slide mt-4 container-fluid" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="q.jpg" class="d-block w-100" alt="Image 1">
        </div>
        <div class="carousel-item">
          <img src="w.jpg" class="d-block w-100" alt="Image 2">
        </div>
        <div class="carousel-item">
          <img src="e.jpg" class="d-block w-100" alt="Image 3">
        </div>
      </div>
      <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <div class="container-fluid mt-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –Ω–∞–º!</h5>
          <p class="card-text">–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π email. –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤ –∏–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∞–π—Ç–∞</p>
          <form id="feedbackForm">
            <div class="form-group">
              <label for="emailInput">Email:</label>
              <input type="email" class="form-control" id="emailInput" required>
            </div>
            <div class="form-group">
              <label for="feedbackTextarea">–û—Ç–∑—ã–≤ –∏–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</label>
              <textarea class="form-control" id="feedbackTextarea" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-success">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –∏–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é</button>
          </form>
        </div>
      </div>
    </div>
    <script>
      document.getElementById('feedbackForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const email = document.getElementById('emailInput').value;
      const feedback = document.getElementById('feedbackTextarea').value;
      const feedbackData = {
        email: email,
        feedback: feedback,
        timestamp: new Date().toLocaleString()
      };
      const existingFeedback = JSON.parse(localStorage.getItem('feedback')) || [];
      existingFeedback.push(feedbackData);
      localStorage.setItem('feedback', JSON.stringify(existingFeedback));
      window.location.reload();
      });
    </script>
  <script>
    document.querySelector('button.btn-primary').addEventListener('click', function() {
      alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∏–Ω—Ç–µ—Ä–µ—Å –∫ –Ω–∞—à–µ–º—É —Å–∞–π—Ç—É!');
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
    function validateEmail(email) {
      const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(String(email).toLowerCase());
    }
    document.getElementById('email').addEventListener('input', function(e){
      const emailBox = e.target;
      const emailFeedback = document.getElementById('emailFeedback');
      
      if (!validateEmail(emailBox.value)) {
        emailBox.classList.add('is-invalid');
        emailFeedback.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email';
      } else {
        emailBox.classList.remove('is-invalid');
        emailFeedback.textContent = '';
      }
    });
    function validateUsername(username) {
      return /^[a-zA-Z0-9_]{3,}$/.test(username); 
    }
    function validatePassword(password) {
      return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z0-9]{8,}$/.test(password);
    }

    $('#registerModal').on('shown.bs.modal', function () {
      document.getElementById('username').classList.remove('is-invalid');
      document.getElementById('password').classList.remove('is-invalid');
      document.getElementById('usernameFeedback').textContent = '';
      document.getElementById('passwordFeedback').textContent = '';
    });
    document.getElementById('username').addEventListener('input', function(e){
      var feedbackElement = document.getElementById('usernameFeedback');
      if (!validateUsername(e.target.value)) {
        feedbackElement.textContent = '–ù–∏–∫–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è.';
        e.target.classList.add('is-invalid');
      } else {
        e.target.classList.remove('is-invalid');
        feedbackElement.textContent = '';
      }
    });
    document.getElementById('password').addEventListener('input', function(e){
      var feedbackElement = document.getElementById('passwordFeedback');
      if (!validatePassword(e.target.value)) {
        feedbackElement.textContent = '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.';
        e.target.classList.add('is-invalid');
      } else {
        e.target.classList.remove('is-invalid');
        feedbackElement.textContent = '';
      }
    });

    });

    document.addEventListener("DOMContentLoaded", function(){

    function validateEmail(email) {
      const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(String(email).toLowerCase());
    }

    document.getElementById('login-email').addEventListener('input', function(e){
      const emailBox = e.target;
      
      if (!validateEmail(emailBox.value)) {
        emailBox.classList.add('is-invalid');
      } else {
        emailBox.classList.remove('is-invalid');
      }
    });

    document.getElementById('login-password').addEventListener('input', function(e){
      const passwordBox = e.target;
      
      if (passwordBox.value.length < 8) { 
        passwordBox.classList.add('is-invalid');
      } else {
        passwordBox.classList.remove('is-invalid');
      }
    });
    });

    function updateCartBadge() {
      var cart = JSON.parse(localStorage.getItem('cart')) || { items: [], total: 0 };
      var cartBadge = document.getElementById('cart-badge');
      
      if (cartBadge) {
        cartBadge.textContent = cart.items.reduce((total, item) => total + item.quantity, 0);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      updateCartBadge();
    });

    document.getElementById('loginForm').addEventListener('submit', function(event) {
      event.preventDefault();

      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;

      const usersData = JSON.parse(localStorage.getItem('users')) || [];

      if (email === 'admin@mail.ru' && password === 'Admin123') {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('login-email', email);
        window.location.href = "Administrative.html";
      }
      else {
        const user = usersData.find(u => u.email === email && u.password === password);
        if (user) {
          localStorage.setItem('isLoggedIn', 'true');
          localStorage.setItem('login-email', email);
          window.location.href = "Products.html";
        } else {
          alert('Invalid email or password');
        }
      }
    });

    window.addEventListener('load', function() {
      const isLoggedIn = localStorage.getItem('isLoggedIn'); 
      if (isLoggedIn === 'true') {
        const email = localStorage.getItem('login-email');
        const username = getUsernameByEmail(email);
        document.getElementById('loginBtn').style.display = 'none';
        document.getElementById('registerBtn').style.display = 'none';  
        document.getElementById('logoutBtn').style.display = 'inline-block';
        document.getElementById('usernameDisplay').style.display = 'inline-block';
        document.getElementById('loggedInUsername').textContent = username;
        logoutBtn.addEventListener('click', function() {
          localStorage.removeItem('isLoggedIn');
          localStorage.removeItem('login-email');
          window.location.reload();
        });
      }
    });
    function getUsernameByEmail(email) {
      const usersData = JSON.parse(localStorage.getItem('users')) || [];
      const user = usersData.find(u => u.email === email);
      return user ? user.username : '';
    }
    document.getElementById('registrationForm').addEventListener('submit', function(event) {
      event.preventDefault();

      const email = document.getElementById('email').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const usersData = JSON.parse(localStorage.getItem('users')) || [];

      const isExistingUser = usersData.some(user => user.email === email);

      if (!isExistingUser) {
        const newUser = {
          email: email,
          username: username,
          password: password
        };

        usersData.push(newUser);

        localStorage.setItem('users', JSON.stringify(usersData));

        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('login-email', email);
        window.location.href = "Home page.html";
      } else {
        alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
      }
    });
    </script>    
</body>
</html>